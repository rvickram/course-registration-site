<div class="modal fade" id="createAccountModal" tabindex="-1" role="dialog" aria-labelledby="createAccountModalLongTitle" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="createAccountModalLongTitle">Create an Account</h5>
                <button type="button" #closeNewAccModal class="close" data-dismiss="modal" aria-label="Close" (click)="onClose()">
                <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p>Fill in the following fields to register:</p>

                <form [formGroup]="newAccForm" (ngSubmit)="onSubmit()" class="mb-2">

                    <fieldset formGroupName="name">
                        <div class="form-group"
                             [ngClass]="{
                            'has-danger': firstName.invalid && (firstName.dirty || firstName.touched),
                            'has-success': firstName.valid && (firstName.dirty || firstName.touched)
                          }">
                          <label>First Name</label>
                          <input type="text"
                                 class="form-control"
                                 [class.is-invalid]="newAccForm.get('name').get('firstName').invalid && newAccForm.get('name').get('firstName').touched"
                                 formControlName="firstName"
                                 maxlength="30"
                                 placeholder="e.g. Jagath"
                                 required>
                          <div class="form-control-feedback"
                               *ngIf="firstName.errors && (firstName.dirty || firstName.touched)">
                            <p *ngIf="firstName.errors.required">First Name is required</p>
                          </div>
                    
                          <!--
                            <pre>Valid? {{ myform.controls.name.controls.firstName.valid }}</pre>
                            <pre>Dirty? {{ myform.controls.name.controls.firstName.dirty }}</pre>
                          -->
                        </div>
                    
                        <div class="form-group"
                             [ngClass]="{
                            'has-danger': lastName.invalid && (lastName.dirty || lastName.touched),
                            'has-success': lastName.valid && (lastName.dirty || lastName.touched)
                          }">
                          <label>Last Name</label>
                          <input type="text"
                                 class="form-control"
                                 [class.is-invalid]="newAccForm.get('name').invalid && newAccForm.get('name').touched"
                                 formControlName="lastName"
                                 maxlength="30"
                                 placeholder="e.g. Samarabandu"
                                 required>
                          <div class="form-control-feedback"
                               *ngIf="lastName.errors && (lastName.dirty || lastName.touched)">
                            <p *ngIf="lastName.errors.required">Last Name is required</p>
                          </div>
                        </div>
                      </fieldset>
                    
                    
                      <div class="form-group"
                           [ngClass]="{
                            'has-danger': email.invalid && (email.dirty || email.touched),
                            'has-success': email.valid && (email.dirty || email.touched)
                       }">
                        <label>Email</label>
                        <input type="email"
                               class="form-control"
                               [class.is-invalid]="newAccForm.get('email').invalid && newAccForm.get('email').touched"
                               formControlName="email"
                               maxlength="30"
                               placeholder="e.g. example@uwo.ca"
                               required>
                        <div class="form-control-feedback"
                             *ngIf="email.errors && (email.dirty || email.touched)">
                          <p *ngIf="email.errors.required">Email is required</p>
                          <p *ngIf="email.errors.pattern">The email address is invalid!</p>
                        </div>
                    
                        <!--
                          <pre>Valid? {{ myform.controls.email.valid }}</pre>
                          <pre>Dirty? {{ myform.controls.email.dirty }}</pre>
                        -->
                    
                      </div>
                    
                      <div class="form-group"
                           [ngClass]="{
                            'has-danger': password.invalid && (password.dirty || password.touched),
                            'has-success': password.valid && (password.dirty || password.touched)
                       }">
                        <label>Password</label>
                        <input type="password"
                               class="form-control"
                               [class.is-invalid]="newAccForm.get('password').invalid && newAccForm.get('password').touched"
                               formControlName="password"
                               maxlength="30"
                               placeholder="Password"
                               required>
                        <div class="form-control-feedback"
                             *ngIf="password.errors && (password.dirty || password.touched)">
                          <p *ngIf="password.errors.required">Password is required</p>
                          <p *ngIf="password.errors.minlength">Password must be 8 characters long, we need another {{password.errors.minlength.requiredLength - password.errors.minlength.actualLength}} characters </p>
                        </div>
                      </div>

                    <button type="submit" class="btn btn-primary">Submit</button>
                  </form>

                  <div *ngFor="let msg of modalMessages" 
                    class="alert alert-dismissible fade show alert-danger"
                    role="alert">
                      <strong>Error</strong> {{msg}}
                      <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                  </div>
            </div>
    
            <div class="modal-footer">
                <div>
                    <h5>Login with Other Methods</h5>
                </div>
                
                <button type="button" class="btn btn-secondary" data-dismiss="modal" (click)="onClose()">Close</button>
            </div>
         </div>
    </div>
</div>